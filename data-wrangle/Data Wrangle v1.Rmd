---
title: "Data Wrangle v1"
author: "Joey Hulbert"
date: "12/15/2021"
output: html_document
---

# Purpose

The purpose of this document is to track and provide instructions for reproducing the analyses of the [Wester Redcedar Dieback Map](https://www.inaturalist.org/projects/western-redcedar-dieback-map) project data.

# Approach

The overall approach is to model empirical data collected by community scientists with ancillary environmental data (climate, topographic, and soils) to identify important predictors of western redcedar dieback.

# Open questions

The below bullets are questions or comments that should be resolved before final analyses

* Considerations
  + Should we filter data to remove GPS points with poor accuracy?
  + Data averaged over last decade or last 30 years?
  + Better approach to calculate topographic data?

# Datasets

## Empirical Tree Point Data

Data were downloaded from the [Wester Redcedar Dieback Map](https://www.inaturalist.org/projects/western-redcedar-dieback-map) project. 

```{r}
data <- read.csv("./data/observations-9.19.21.csv")
```

These data were then subset to include only gps information to use in collecting ancillary data.

```{r}
gps <- data[c(1,22,23)]
gps <- rename(gps,lat = latitude) %>% `colnames<-`(c("ID2","lat","long")) %>% mutate(el = ".") #columns were ranamed to match format for ClimateNA tool.
```

## Ancillary Climate Data

Data were downloaded for the iNat GPS locations using the ClimateNA Tool. Instructions for how this tool was used are available at the [climate subfolder](/climate).

There were many groupings of the downscaled climate variables available

* Groupings explored
  + data averaged over 30 year normals (1991-2020)
  + data  averaged over last decade (2011-2020)

```{r}
normals <- read.csv("./data/gps_Normal_1991_2020MSY.csv")
normals <- rename(normals, id = ID2)
```

```{r}
lastdecade <- read.csv("./data/gps_Decade_2011_2020MSY.csv")
lastdecade <- rename(lastdecade, id = ID2)
```


## Ancillary Topography Data

Ancillary Topographic data were calculated in QGIS. However, there may be an easier approach using different datasets or built in functions within ArcGIS. 

```{r}
topo <- read.csv("./data/gps plus DEM and TOPO data.csv")
topo <- rename(topo, id = ID2)
```

## Ancillary Soils Data

```{r}
wasoils <- read.csv("./data/Washington_GPS_Soils_Data_muaggat_component.csv")
orsoils <- read.csv("./data/Oregon_GPS_Soils_Data_muagget_component.csv")
```


