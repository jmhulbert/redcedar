---
title: "Data Wrangle v1"
author: "Joey Hulbert"
date: "12/15/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = "/Users/redcedar/ServerFiles/redcedar/") 
```

# Purpose

The purpose of this document is to track and provide instructions for reproducing the analyses of the [Wester Redcedar Dieback Map](https://www.inaturalist.org/projects/western-redcedar-dieback-map) project data.

# Approach

The overall approach is to model empirical data collected by community scientists with ancillary environmental data (climate, topographic, and soils) to identify important predictors of western redcedar dieback.

  * [Data Wrangle Instructions](./data-wrangle/Data-Wrangle-v1.html)
    + iNat Data
    + Environmental Data
      + [Climate Data](./data-wrangle/climate/Climate-Data-Extraction.html)
      + [Topography Data](./data-wrangle/topo/Topo-Data-Extraction---ArcGIS.html)
      + [Soils Data](./data-wrangle/soils/Soil-Data-Extraction.html)


```{r include=FALSE}
#install.packages("tidyverse")
library(tidyverse)
```

# Datasets

## Empirical Tree Point Data

Data were downloaded from the [Wester Redcedar Dieback Map](https://www.inaturalist.org/projects/western-redcedar-dieback-map) project. 

```{r}
data <- read.csv("./data/observations-9.19.21.csv")
```

These data were then subset to include only gps information to use in collecting ancillary data.

```{r}
gps <- data[c(1,22,23)]
gps <- rename(gps,lat = latitude) %>% `colnames<-`(c("ID2","lat","long")) %>% mutate(el = ".") #columns were ranamed to match format for ClimateNA tool.
```

## Ancillary Climate Data

Data were downloaded for the iNat GPS locations using the ClimateNA Tool. Instructions for how this tool was used are included in the [climate subfolder](/climate).

There were many time series groupings (different intervals where data were averaged) of the downscaled climate variables available. 

* Grouping explored
  + data averaged over 30 year normals (1991-2020)
    + Monthly
    + Seasonal
    + Annual
  + data averaged over last decade (2011-2020)
    + Monthly
    + Seasonal
    + Annual

## Ancillary Topography Data

Ancillary Topographic data were calculated in QGIS originally, but then we switched to ArcGIS to follow methods methods for extracting topo data from GPS points as descripbed in the [topo subfolder](/topo). 


## Ancillary Soils Data

gSURRGO data were downloaded for states containing iNAT observations. Instructions for extracting the soils data using Arc GIS Pro are included  in the [soils subfolder](/soils).

